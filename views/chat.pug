extends layout
//- Se toma como base la plantilla layout.pug

block content
  //- Meta viewport (imprescindible para responsividad)
  meta(name="viewport", content="width=device-width, initial-scale=1.0, maximum-scale=1.0")
  
  link(rel="stylesheet", href="/stylesheets/chat.css")

  body
    .container-fluid.d-flex.flex-column.vh-100.bg-light.p-0
      //- Cabecera con padding reducido en móvil
      .row.m-0.bg-primary.text-white.py-2.px-0
        .col
          h1.text-center.mb-0.fs-4.chat-header Chatbot
      
      //- Área de mensajes (contenedor expandible)
      .row.m-0.flex-grow-1.overflow-auto.bg-white
        .col.px-0
          ul#messages.list-unstyled.p-2.p-sm-3.mb-0
      
      //- Formulario fijo en la parte inferior con sombra
      .row.m-0.bg-white.py-3.chat-input-area
        .col.px-3
          form.d-flex.align-items-center
            input.form-control.me-2(type="text", name="msg", placeholder="Type your message here...", required)
            button.btn.btn-primary.d-flex.align-items-center.justify-content-center.btn-send(type="submit")
              span.d-none.d-sm-inline.me-1 Send
              i.fas.fa-paper-plane

    //- Template para mensajes del usuario
    template#userMsgTemplate
      li.message.mb-3.text-end
        .d-inline-block.bg-primary.text-white.p-2.rounded-3.mw-75
          p.content.m-0

    //- Template para mensajes del sistema/bot
    template#systemMsgTemplate
      li.message.mb-3.text-start
        .d-inline-block.bg-light.p-2.rounded-3.mw-75
          span.role.d-block.text-muted.small.mb-1 System
          p.content.m-0

  //- Scripts necesarios
  script(src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js")
  script(rel="javascript", src="/javascripts/chat.js")